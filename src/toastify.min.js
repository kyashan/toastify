(function(g,h){"undefined"!==typeof module&&module.exports?module.exports=h(require("angular")):"function"===typeof define&&define.amd?define(["angular"],h):h(g.angular)})(this,function(g,h){var n=g.module("jj.toastify",[]),k=g.element,p={};n.provider("toastify",function(){var h=this.defaults={toastCustomClass:null,appendTo:"body",closeByClick:!1,showClose:!0,autoclose:!0,timeout:4E3,message:"",callback:null,onclick:null,template:null,controller:null,gravity:"top",doneMessage:"",doneClass:"done",
doneAutoclose:!0},n=0;this.$get=["$document","$templateCache","$compile","$q","$http","$rootScope","$timeout","$window","$controller","$injector",function(r,w,t,x,y,q,l,z,u,A){r.find("body");var e={appendToastContainer:function(a,b){a.prepend(b)},getMillisFromCss:function(a){if(!a)return 0;a=Number(a.replace(/s/g,""));return 1>=a?1E3*a:a},performToastClose:function(a,b){var d=a.attr("id");$(a).addClass("exit");q.$broadcast("toastify.toast-removing",{toast:a});l(function(){$(a).data("callback")&&$(a).data("callback")();
a.remove();q.$broadcast("toastify.toast-removed",{toast:a});p[d]&&(p[d].$destroy(),delete p[d])},e.getMillisFromCss($(".exit").css("animation-duration")||$(".exit").css("transition-duration"))||0)},performAllToastClose:function(){for(var a=$(".toast"),b=a.length-1;0<=b;b--)e.performToastClose($(a[b]))}};return{create:function(a){var b=g.copy(h);a=a||{};g.extend(b,a);var d="toast"+ ++n;a=k(b.appendTo);var r=k('<div class="closeToast" ng-click="closeThisToast()">X</div>'),v=k('<div class="toastMessage">'+
b.message+"</div>"),c=k('<div id="'+d+'" class="toast"></div>'),s=k('<div id="toastContainer_'+b.gravity+'" class="toastContainer"></div>'),f;f=b.scope?b.scope:q.$new(!0);p[d]=f;d={};b.controller&&(d=u(b.controller,g.extend(d,{$scope:f,$element:c})),c.data("$toastifyController",d));b.callback&&c.data("callback",b.callback);c.data("doneMessage",b.doneMessage);c.data("doneClass",b.doneClass);c.data("doneTemplate",b.doneTemplate);c.data("timeout",b.timeout);c.data("doneAutoclose",b.doneAutoclose);b.template&&
c.append('<div class="customToastTemplate">'+b.template+"</div>");b.message&&c.prepend(v);b.showClose&&c.append(r);var m;b.autoclose&&(m=l(function(){e.performToastClose(c)},b.timeout));c.data("timer",m);b.closeByClick&&c.bind("click",function(){e.performToastClose(c)});b.onclick&&c.bind("click",function(){b.onclick(c)});c.addClass(b.toastCustomClass);document.querySelector("#toastContainer_"+b.gravity)?(m=t(c)(f),a=k("#toastContainer_"+b.gravity)):(s.prepend(c),s.addClass(b.gravity),m=t(s)(f));e.appendToastContainer(a,
m);q.$broadcast("toastify.toast-created",{toast:c});f.closeThisToast=function(){e.performToastClose(c)};f.getToast=function(){return c};f.closeAllToasts=function(){e.performAllToastClose()};return c},done:function(a){l.cancel(a.data("timer"));a.children(".customToastTemplate").html(a.data("doneTemplate"));var b=$(a).attr("id");$(a).children(".toastMessage").text(a.data("doneMessage"));$("#"+b).addClass(a.data("doneClass"));a.data("doneAutoclose")&&l(function(){e.performToastClose(a)},a.data("timeout"))},
closeToast:function(a){l(function(){e.performToastClose(a)},a.data("timeout"))},closeAllToasts:function(){e.performAllToastClose()}}}]});return n});
